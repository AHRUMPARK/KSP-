<script>
    const mainPage = `<%- include('main') %>`;
    const allChartPage = `<%- include('allChart') %>`;

// 새로고침 감지 명령어
// window.addEventListener("beforeunload", function (e) {
// });


const container = document.getElementById('layoutSidenav_content');
let html = '';
let head = document.getElementsByTagName("head")[0];

if(location.hash === '#main' || location.hash === '#' || location.hash === '') {    
    container.innerHTML = mainPage;

    // script 추가
    let script = document.createElement('script');
    script.src = '/static/js/mainAllChart.js';
    script.type = 'text/javascript';
    head.appendChild(script);

} else if(location.hash === '#allChart') {
    container.innerHTML = allChartPage;
    // console.log(allChartPage);

    // head 태그 내의 css, cdn, script 개수 확인
    // main 페이지에서 사용하는 기본 값 18개는 냅두고, 추가되는 19부터 변경 작업
    // index 0부터라서 1개 차이
    // console.log(head.children.length);
    if(head.children.length > 17) {
        let headlength = head.children.length;
        // console.log(headlength);
        for(let i = headlength-1; i > 17; i--) {
            head.children[i].remove();
        }
    }

    // css 추가
    let link = document.createElement("link");
    link.rel = "stylesheet";
    link.type = "text/css";
    link.href = "/static/css/allChart.css";
    head.appendChild(link);

    // script 추가
    let script = document.createElement('script');
    script.src = '/static/js/allChart.js';
    script.type = 'text/javascript';
    head.appendChild(script);

    const dayTag = document.getElementById('dayTag');
    const fileday = "<%= result.youtubedata.filelist[result.youtubedata.filelist.length-1].slice(17, -8) %>";
    dayTag.textContent = fileday;
}

</script>
